{% extends 'core/base.html' %}
{% load static %} {# Ensure you have this at the top if you're using static files #}

{% block content %}

<div class="grid grid-cols-5 gap-6">
    <div class="col-span-2">
        <div class="swiper-container">
            <div class="swiper-wrapper">
                <div class="swiper-slide">
                    <img src="{{ property.image1.url }}" class="rounded-xl mb-6" alt="">
                </div>
                <div class="swiper-slide">
                    <img src="{{ property.image2.url }}" class="rounded-xl mb-6" alt="">
                </div>
                <div class="swiper-slide">
                    <img src="{{ property.image3.url }}" class="rounded-xl mb-6" alt="">
                </div>
                <div class="swiper-slide">
                    <img src="{{ property.image4.url }}" class="rounded-xl mb-6" alt="">
                </div>
            </div>
            <!-- Add Pagination -->
            <div class="swiper-pagination"></div>
        </div>
    </div>
    <div class="col-span-2 p-6 bg-gray-100 rounded-xl">
        <h1 class="text-3xl mb-4">Property Details</h1>
        <div class="bg-white rounded-xl p-4 mb-6">
            <h2 class="text-xl font-semibold mb-2">Description</h2>
            <p class="text-gray-700">{{ property.description }}</p>
        </div>

        <!-- Property Details Content -->

        <!-- If user is the owner of the property -->
        {% if request.user == property.created_by %}
            <!-- Edit and Delete Buttons -->
            <div class="bg-white mb-6 rounded-xl p-4 text-center">
                <div class="flex justify-around mt-4">
                    <a href="{% url 'property:edit' property.id %}" class="px-6 py-3 text-lg font-semibold bg-teal-500 text-white rounded-xl">EDIT</a>
                    <p>This is your property!</p>
                    <a href="{% url 'property:delete' property.id %}" class="px-6 py-3 text-lg font-semibold bg-red-500 text-white rounded-xl">DELETE</a>
                </div>
            </div>
        {% else %}
            <!-- Contact Seller and Add to Favorites -->
            <div class="text-center">
                <a href="mailto:{{ property.created_by.email }}" class="inline-block m-6 px-6 py-6 text-lg font-semibold bg-teal-500 text-white rounded-xl hover:bg-teal-700">
                    Email Seller {{ property.created_by.email }}
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6 ml-2 inline-block align-middle">
                        <path d="M1.5 8.67v8.58a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V8.67l-8.928 5.493a3 3 0 0 1-3.144 0L1.5 8.67Z" />
                        <path d="M22.5 6.908V6.75a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3v.158l9.714 5.978a1.5 1.5 0 0 0 1.572 0L22.5 6.908Z" />
                    </svg>
                </a>
                <a href="{% url 'property:favourite_add' property.id %}" class="inline-flex items-center mt-4 px-6 py-6 text-lg font-semibold bg-teal-500 text-white rounded-xl hover:bg-teal-700">
                    Add to favourites
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6 inline-block align-middle ml-2">
                        <path d="m11.645 20.91-.007-.003-.022-.012a15.247 15.247 0 0 1-.383-.218 25.18 25.18 0 0 1-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0 1 12 5.052 5.5 5.5 0 0 1 16.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 0 1-4.244 3.17 15.247 15.247 0 0 1-.383.219l-.022.012-.007.004-.003.001a.752.752 0 0 1-.704 0l-.003-.001Z" />
                    </svg>
                </a>
            </div>
        {% endif %}
        <!-- Google Maps Embed -->
        <iframe src="https://maps.google.com/maps?q={{property.postcode}}&amp;t=&amp;z=13&amp;ie=UTF8&amp;iwloc=&amp;output=embed" width="100%" height="480" allowfullscreen=""></iframe>
    </div>
</div>

<!-- Include Swiper.js -->
<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>

<!-- Initialize Swiper -->
<script>
    var swiper = new Swiper('.swiper-container', {
        pagination: {
            el: '.swiper-pagination',
            clickable: true,
        },
    });
</script>

{% endblock %}
